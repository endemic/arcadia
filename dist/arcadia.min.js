!function(t){"use strict";var i=t.Arcadia||{},e=function(){this.active=[],this.inactive=[],this.factory=null};Object.defineProperty(e.prototype,"length",{enumerable:!0,get:function(){return this.active.length}}),e.prototype.at=function(t){return this.active[t]},e.prototype.add=function(t){void 0===t.zIndex&&(t.zIndex=this.active.length+this.inactive.length);for(var i=0;i<this.length&&t.zIndex>this.active[i].zIndex;)i+=1;return this.active.splice(i,0,t),this.length},e.prototype.remove=function(t){var i;return"number"==typeof t?(i=t,t=this.active.splice(i,1)[0],"function"==typeof t.destroy&&t.destroy(),t):-1!==this.active.indexOf(t)?(i=this.active.indexOf(t),t=this.active.splice(i,1)[0],"function"==typeof t.destroy&&t.destroy(),t):-1!==this.inactive.indexOf(t)?(i=this.inactive.indexOf(t),t=this.inactive.splice(i,1)[0],"function"==typeof t.destroy&&t.destroy(),t):void 0},e.prototype.activate=function(t){var i;if(t){if(i=this.inactive.indexOf(t),-1===i)return;for(t=this.inactive.splice(i,1)[0],"function"==typeof t.reset&&t.reset(),this.index=this.length;this.index>0&&this.active[this.index-1].zIndex>t.zIndex;)this.active[this.index]=this.active[this.index-1],this.index-=1;return this.active[this.index]=t,t}if(!t&&this.inactive.length){for(t=this.inactive.shift(),"function"==typeof t.reset&&t.reset(),this.index=this.length;this.index>0&&this.active[this.index-1].zIndex>t.zIndex;)this.active[this.index]=this.active[this.index-1],this.index-=1;return this.active[this.index]=t,t}if("function"!=typeof this.factory)throw new Error("You tried to activate a Pool object without a factory.");return this.add(this.factory()),this.active[this.length-1]},e.prototype.deactivate=function(t){var i;if(i="number"!=typeof t?this.active.indexOf(t):t,-1!==i){var e=this.active.splice(i,1)[0];return this.inactive.push(e),e}},e.prototype.deactivateAll=function(){for(this.index=this.length;this.index--;)this.deactivate(this.index)},e.prototype.activateAll=function(){for(;this.inactive.length;)this.activate()},e.prototype.update=function(t){for(this.index=this.length;this.index--;)this.at(this.index).update(t)},e.prototype.draw=function(){for(this.index=this.length;this.index--;)this.at(this.index).draw.apply(this.at(this.index),arguments)},e.prototype.onPointStart=function(t){for(this.index=this.length;this.index--;)this.at(this.index).onPointStart(t)},e.prototype.onPointMove=function(t){for(this.index=this.length;this.index--;)this.at(this.index).onPointMove(t)},e.prototype.onPointEnd=function(t){for(this.index=this.length;this.index--;)this.at(this.index).onPointEnd(t)},i.Pool=e,t.Arcadia=i}(window),function(t){"use strict";var i=t.Arcadia||{},e=function(t){this.size={width:t.width,height:t.height},i.VIEWPORT_WIDTH=this.size.width,i.VIEWPORT_HEIGHT=this.size.height,this.scale=1,this.offset={x:0,y:0},i.FPS=60,t.hasOwnProperty("fps")&&(i.FPS_LIMIT=t.fps),t.hasOwnProperty("element")?this.element=t.element:(this.element=document.createElement("div"),this.element.id="arcadia",document.body.appendChild(this.element)),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.element.appendChild(this.canvas),this.setPixelRatio(),this.input={left:!1,up:!1,right:!1,down:!1,w:!1,a:!1,s:!1,d:!1,enter:!1,escape:!1,space:!1,control:!1,z:!1,x:!1},this.keyCodeMap={37:"left",38:"up",39:"right",40:"down",87:"w",65:"a",83:"s",68:"d",13:"enter",27:"escape",32:"space",17:"control",90:"z",88:"x"},this.points=[],i.instance=this,this.onResize=this.onResize.bind(this),this.onPointStart=this.onPointStart.bind(this),this.onPointMove=this.onPointMove.bind(this),this.onPointEnd=this.onPointEnd.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.pause=this.pause.bind(this),this.resume=this.resume.bind(this),this.update=this.update.bind(this),i.ENV.mobile?(this.element.addEventListener("touchstart",this.onPointStart,!1),this.element.addEventListener("touchmove",this.onPointMove,!1),this.element.addEventListener("touchend",this.onPointEnd,!1),this.element.addEventListener("touchmove",function(t){t.preventDefault()})):(document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyUp,!1),this.element.addEventListener("mousedown",this.onPointStart,!1),this.element.addEventListener("mousemove",this.onPointMove,!1),this.element.addEventListener("mouseup",this.onPointEnd,!1)),void 0!==window.cordova&&(document.addEventListener("pause",this.pause,!1),document.addEventListener("resume",this.resume,!1)),t.scaleToFit&&(this.onResize(),window.addEventListener("resize",this.onResize,!1)),this.activeScene=new t.scene,this.start()};e.prototype.pause=function(){this.stop(),"function"==typeof this.activeScene.pause&&this.activeScene.pause()},e.prototype.resume=function(){this.start(),"function"==typeof this.activeScene.resume&&this.activeScene.resume()},e.prototype.onPointStart=function(t){this.getPoints(t),-1!==t.type.indexOf("mouse")&&(this.mouseMove=!0),this.activeScene.onPointStart(this.points)},e.prototype.onPointMove=function(t){this.mouseMove&&(this.getPoints(t),this.activeScene.onPointMove(this.points))},e.prototype.onPointEnd=function(t){var i=!0;this.getPoints(t,i),-1!==t.type.indexOf("mouse")&&(this.mouseMove=!1),this.activeScene.onPointEnd(this.points)},e.prototype.onKeyDown=function(t){var i=this.getKey(t.keyCode);this.input[i]||(this.input[i]=!0,"function"==typeof this.activeScene.onKeyDown&&this.activeScene.onKeyDown(i))},e.prototype.onKeyUp=function(t){var i=this.getKey(t.keyCode);this.input[i]=!1,"function"==typeof this.activeScene.onKeyUp&&this.activeScene.onKeyUp(i)},e.prototype.getKey=function(t){return this.keyCodeMap[t]||""},e.prototype.getPoints=function(t,i){var e="touches";for(i=i||!1,i&&(e="changedTouches");this.points.length>0;)this.points.pop();var n={x:this.activeScene.camera.position.x,y:this.activeScene.camera.position.y};if(-1!==t.type.indexOf("mouse"))this.points.unshift({x:(t.pageX-this.offset.x)/this.scale-this.size.width/2+n.x,y:(t.pageY-this.offset.y)/this.scale-this.size.height/2+n.y});else for(var s=t[e].length;s--;)this.points.unshift({x:(t[e][s].pageX-this.offset.x)/this.scale-this.size.width/2+n.x,y:(t[e][s].pageY-this.offset.y)/this.scale-this.size.height/2+n.y})},e.prototype.start=function(){this.previousDelta=window.performance.now(),this.updateId=window.requestAnimationFrame(this.update)},e.prototype.stop=function(){window.cancelAnimationFrame(this.updateId)},e.prototype.update=function(t){var e=t-this.previousDelta;this.updateId=window.requestAnimationFrame(this.update),i.FPS=.9*i.FPS+1e3/e*.1,i.FPS_LIMIT&&e<1e3/i.FPS_LIMIT||(this.activeScene.update(e/1e3),this.activeScene.draw(this.context),this.previousDelta=t)},e.prototype.setPixelRatio=function(){window.devicePixelRatio||(window.devicePixelRatio=1),void 0===this.context.backingStorePixelRatio&&(this.context.backingStorePixelRatio=this.context.webkitBackingStorePixelRatio||1),i.PIXEL_RATIO=window.devicePixelRatio/this.context.backingStorePixelRatio,this.canvas.width=this.size.width*i.PIXEL_RATIO,this.canvas.height=this.size.height*i.PIXEL_RATIO,this.canvas.style.width=this.size.width+"px",this.canvas.style.height=this.size.height+"px"},e.prototype.onResize=function(){var t,i,e,n=window.innerHeight,s=window.innerWidth;s>n?(i="landscape",e=this.size.width/this.size.height):(i="portrait",e=this.size.height/this.size.width),"landscape"===i?s/e>n?(s=n*e,t="0 "+(window.innerWidth-s)/2+"px"):n>s/e&&(n=s/e,t=(window.innerHeight-n)/2+"px 0"):"portrait"===i&&(n/e>s?(n=s*e,t=(window.innerHeight-n)/2+"px 0"):s>n/e&&(s=n/e,t="0 "+(window.innerWidth-s)/2+"px")),this.scale=n/this.size.height,this.offset.x=(window.innerWidth-s)/2,this.offset.y=(window.innerHeight-n)/2,this.element.setAttribute("style","position: relative; width: "+s+"px; height: "+n+"px; margin: "+t+";"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style["-webkit-transform"]="scale("+this.scale+")",this.canvas.style["-webkit-transform-origin"]="0 0",this.canvas.style.transform="scale("+this.scale+")",this.canvas.style["transform-origin"]="0 0"},i.Game=e,t.Arcadia=i}(window),function(t){"use strict";var i=t.Arcadia||{},e=function(t){t=t||{},this.rotation=t.rotation||0,this.scale=void 0===t.scale?1:t.scale,this.alpha=void 0===t.alpha?1:t.alpha,this.enablePointEvents=t.enablePointEvents||!1,this.position=t.position||{x:0,y:0},this.children=new i.Pool};e.prototype.draw=function(){this.children.draw.apply(this.children,arguments)},e.prototype.update=function(t){this.children.update(t)},e.prototype.add=function(t){this.children.add(t)},e.prototype.remove=function(t){this.children.remove(t)},e.prototype.activate=function(t){this.children.activate(t)},e.prototype.deactivate=function(t){this.children.deactivate(t)},e.prototype.onPointStart=function(t){this.enablePointEvents&&this.children.onPointStart(this.offsetPoints(t))},e.prototype.onPointMove=function(t){this.enablePointEvents&&this.children.onPointMove(this.offsetPoints(t))},e.prototype.onPointEnd=function(t){this.enablePointEvents&&this.children.onPointEnd(this.offsetPoints(t))},e.prototype.offsetPoints=function(t){var i=this;return t.map(function(t){return{x:t.x-i.position.x,y:t.y-i.position.y}})},i.GameObject=e,t.Arcadia=i}(window),function(t){"use strict";var i=t.Arcadia||{},e=function(t){t=t||{},i.GameObject.call(this,t);var e={width:i.VIEWPORT_WIDTH,height:i.VIEWPORT_HEIGHT};this.size=t.size||e,this.enablePointEvents=!0,this.camera={target:null,viewport:{width:i.VIEWPORT_WIDTH,height:i.VIEWPORT_HEIGHT},position:{x:0,y:0}}};e.prototype=new i.GameObject,e.prototype.update=function(t){i.GameObject.prototype.update.call(this,t),this.camera.target&&(this.camera.position.x=this.camera.target.position.x,this.camera.position.y=this.camera.target.position.y,this.camera.position.x<this.camera.bounds.left+this.camera.viewport.width/2?this.camera.position.x=this.camera.bounds.left+this.camera.viewport.width/2:this.camera.position.x>this.camera.bounds.right-this.camera.viewport.width/2&&(this.camera.position.x=this.camera.bounds.right-this.camera.viewport.width/2),this.camera.position.y<this.camera.bounds.top+this.camera.viewport.height/2?this.camera.position.y=this.camera.bounds.top+this.camera.viewport.height/2:this.camera.position.y>this.camera.bounds.bottom-this.camera.viewport.height/2&&(this.camera.position.y=this.camera.bounds.bottom-this.camera.viewport.height/2))},e.prototype.draw=function(t){this.color?(t.fillStyle=this.color,t.fillRect(0,0,t.canvas.width,t.canvas.height)):t.clearRect(0,0,t.canvas.width,t.canvas.height);var e={x:this.camera.viewport.width/2-this.camera.position.x,y:this.camera.viewport.height/2-this.camera.position.y};i.GameObject.prototype.draw.call(this,t,e.x,e.y)},Object.defineProperty(e.prototype,"target",{enumerable:!0,get:function(){return this.camera&&this.camera.target},set:function(t){if(!t.position)throw new Error("Scene camera target requires a `position` property.");this.camera.target=t,this.camera.bounds={top:-this.size.height/2,bottom:this.size.height/2,left:-this.size.width/2,right:this.size.width/2},this.camera.position.x=this.camera.target.position.x,this.camera.position.y=this.camera.target.position.y}}),i.Scene=e,t.Arcadia=i}(window),this.Easie=function(){function t(){}return t.backIn=function(t,i,e,n,s){return null==s&&(s=1.70158),e*(t/=n)*t*((s+1)*t-s)+i},t.backOut=function(t,i,e,n,s){return null==s&&(s=1.70158),e*((t=t/n-1)*t*((s+1)*t+s)+1)+i},t.backInOut=function(t,i,e,n,s){return null==s&&(s=1.70158),(t/=n/2)<1?e/2*(t*t*(((s*=1.525)+1)*t-s))+i:e/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+i},t.bounceOut=function(t,i,e,n){return(t/=n)<1/2.75?e*(7.5625*t*t)+i:2/2.75>t?e*(7.5625*(t-=1.5/2.75)*t+.75)+i:2.5/2.75>t?e*(7.5625*(t-=2.25/2.75)*t+.9375)+i:e*(7.5625*(t-=2.625/2.75)*t+.984375)+i},t.bounceIn=function(i,e,n,s){return n-t.bounceOut(s-i,0,n,s)+e},t.bounceInOut=function(i,e,n,s){return s/2>i?.5*t.bounceIn(2*i,0,n,s)+e:.5*t.bounceOut(2*i-s,0,n,s)+.5*n+e},t.circIn=function(t,i,e,n){return-e*(Math.sqrt(1-(t/=n)*t)-1)+i},t.circOut=function(t,i,e,n){return e*Math.sqrt(1-(t=t/n-1)*t)+i},t.circInOut=function(t,i,e,n){return(t/=n/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+i:e/2*(Math.sqrt(1-(t-=2)*t)+1)+i},t.cubicIn=function(t,i,e,n){return e*(t/=n)*t*t+i},t.cubicOut=function(t,i,e,n){return e*((t=t/n-1)*t*t+1)+i},t.cubicInOut=function(t,i,e,n){return(t/=n/2)<1?e/2*t*t*t+i:e/2*((t-=2)*t*t+2)+i},t.elasticOut=function(t,i,e,n,s,o){var h;return null==s&&(s=null),null==o&&(o=null),0===t?i:1===(t/=n)?i+e:(null==o&&(o=.3*n),null==s||s<Math.abs(e)?(s=e,h=o/4):h=o/(2*Math.PI)*Math.asin(e/s),s*Math.pow(2,-10*t)*Math.sin((t*n-h)*(2*Math.PI)/o)+e+i)},t.elasticIn=function(t,i,e,n,s,o){var h;return null==s&&(s=null),null==o&&(o=null),0===t?i:1===(t/=n)?i+e:(null==o&&(o=.3*n),null==s||s<Math.abs(e)?(s=e,h=o/4):h=o/(2*Math.PI)*Math.asin(e/s),t-=1,-(s*Math.pow(2,10*t))*Math.sin((t*n-h)*(2*Math.PI)/o)+i)},t.elasticInOut=function(t,i,e,n,s,o){var h;return null==s&&(s=null),null==o&&(o=null),0===t?i:2===(t/=n/2)?i+e:(null==o&&(o=n*(.3*1.5)),null==s||s<Math.abs(e)?(s=e,h=o/4):h=o/(2*Math.PI)*Math.asin(e/s),1>t?-.5*(s*Math.pow(2,10*(t-=1)))*Math.sin((t*n-h)*(2*Math.PI/o))+i:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-h)*(2*Math.PI)/o)+e+i)},t.expoIn=function(t,i,e,n){return 0===t?i:e*Math.pow(2,10*(t/n-1))+i},t.expoOut=function(t,i,e,n){return t===n?i+e:e*(-Math.pow(2,-10*t/n)+1)+i},t.expoInOut=function(t,i,e,n){return 0===t?i:t===n?i+e:(t/=n/2)<1?e/2*Math.pow(2,10*(t-1))+i:e/2*(-Math.pow(2,-10*(t-1))+2)+i},t.linearNone=function(t,i,e,n){return e*t/n+i},t.linearIn=function(i,e,n,s){return t.linearNone(i,e,n,s)},t.linearOut=function(i,e,n,s){return t.linearNone(i,e,n,s)},t.linearInOut=function(i,e,n,s){return t.linearNone(i,e,n,s)},t.quadIn=function(t,i,e,n){return e*(t/=n)*t+i},t.quadOut=function(t,i,e,n){return-e*(t/=n)*(t-2)+i},t.quadInOut=function(t,i,e,n){return(t/=n/2)<1?e/2*t*t+i:-e/2*((t-=1)*(t-2)-1)+i},t.quartIn=function(t,i,e,n){return e*(t/=n)*t*t*t+i},t.quartOut=function(t,i,e,n){return-e*((t=t/n-1)*t*t*t-1)+i},t.quartInOut=function(t,i,e,n){return(t/=n/2)<1?e/2*t*t*t*t+i:-e/2*((t-=2)*t*t*t-2)+i},t.quintIn=function(t,i,e,n){return e*(t/=n)*t*t*t*t+i},t.quintOut=function(t,i,e,n){return e*((t=t/n-1)*t*t*t*t+1)+i},t.quintInOut=function(t,i,e,n){return(t/=n/2)<1?e/2*t*t*t*t*t+i:e/2*((t-=2)*t*t*t*t+2)+i},t.sineIn=function(t,i,e,n){return-e*Math.cos(t/n*(Math.PI/2))+e+i},t.sineOut=function(t,i,e,n){return e*Math.sin(t/n*(Math.PI/2))+i},t.sineInOut=function(t,i,e,n){return-e/2*(Math.cos(Math.PI*t/n)-1)+i},t}(),"undefined"!=typeof module&&(module.exports=this.Easie),function(t){"use strict";var i=t.Arcadia||{},e=function(t){i.GameObject.apply(this,arguments),this.canvas=document.createElement("canvas"),this.dirty=!0,this.tweens=[],this._color="#fff",this._border={width:0,color:"#fff"},this._shadow={x:0,y:0,blur:0,color:"#fff"},this._vertices=4,this._size={width:10,height:10},this.speed=1,this.velocity={x:0,y:0},this.angularVelocity=0,this.acceleration={x:0,y:0},this.debug=!1;var e=this;t=t||{},Object.keys(t).forEach(function(i){e[i]=t[i]})};e.prototype=new i.GameObject,Object.defineProperty(e.prototype,"color",{enumerable:!0,get:function(){return this._color},set:function(t){this._color=t,this.dirty=!0}}),Object.defineProperty(e.prototype,"border",{enumerable:!0,get:function(){return this._border.width+"px "+this._border.color},set:function(t){var i=t.match(/^(\d+)(?:px)?\ (.+)$/);if(!i||3!==i.length)throw new Error('Use format "(width)px (color)" when setting borders');this._border.width=parseInt(i[1],10),this._border.color=i[2],this.dirty=!0}}),Object.defineProperty(e.prototype,"shadow",{enumerable:!0,get:function(){return"#{this._shadow.x}px #{this._shadow.y}px #{this._shadow.blur}px #{this._shadow.color}"},set:function(t){var i=t.match(/^(\d+)(?:px)?\ (\d+)(?:px)?\ (\d+)(?:px)?\ (.+)$/);if(!i||5!==i.length)throw new Error('Use format "(x)px (y)px (blur)px (color)" when setting shadows');this._shadow.x=parseInt(i[1],10),this._shadow.y=parseInt(i[2],10),this._shadow.blur=parseInt(i[3],10),this._shadow.color=i[4],this.dirty=!0}}),Object.defineProperty(e.prototype,"vertices",{enumerable:!0,get:function(){return this._vertices},set:function(t){this._vertices=t,this.dirty=!0}}),Object.defineProperty(e.prototype,"size",{enumerable:!0,get:function(){return this._size},set:function(t){if(0===t.width||0===t.height)throw new Error("Bad things happen if you try to draw a 0x0 canvas!");this._size={width:t.width,height:t.height},this.dirty=!0}}),Object.defineProperty(e.prototype,"path",{enumerable:!0,get:function(){return this._path},set:function(t){this._path=t,this.dirty=!0}}),e.prototype.drawCanvasCache=function(){if(this.canvas){this.canvas.width=(this.size.width+this._border.width+Math.abs(this._shadow.x)+2*this._shadow.blur)*i.PIXEL_RATIO,this.canvas.height=(this.size.height+this._border.width+Math.abs(this._shadow.y)+2*this._shadow.blur)*i.PIXEL_RATIO,this.setAnchorPoint();var t=this.canvas.getContext("2d");if(t.lineJoin="miter",t.beginPath(),this.debug&&(t.lineWidth=1*i.PIXEL_RATIO,t.strokeStyle="#f00",t.strokeRect(0,0,this.canvas.width,this.canvas.height),t.arc(this.anchor.x,this.anchor.y,3,0,2*Math.PI,!1),t.stroke()),t.translate(this.anchor.x,this.anchor.y),this.path)this.path(t);else switch(this.vertices){case 2:t.moveTo(-this.size.width/2*i.PIXEL_RATIO,-this.size.height/2*i.PIXEL_RATIO),t.lineTo(this.size.width/2*i.PIXEL_RATIO,this.size.height/2*i.PIXEL_RATIO);break;case 3:t.moveTo(0,-this.size.height/2*i.PIXEL_RATIO),t.lineTo(this.size.width/2*i.PIXEL_RATIO,this.size.height/2*i.PIXEL_RATIO),t.lineTo(-this.size.width/2*i.PIXEL_RATIO,this.size.height/2*i.PIXEL_RATIO),t.lineTo(0,-this.size.height/2*i.PIXEL_RATIO);break;case 4:t.moveTo(-this.size.width/2*i.PIXEL_RATIO,-this.size.height/2*i.PIXEL_RATIO),t.lineTo(this.size.width/2*i.PIXEL_RATIO,-this.size.height/2*i.PIXEL_RATIO),t.lineTo(this.size.width/2*i.PIXEL_RATIO,this.size.height/2*i.PIXEL_RATIO),t.lineTo(-this.size.width/2*i.PIXEL_RATIO,this.size.height/2*i.PIXEL_RATIO),t.lineTo(-this.size.width/2*i.PIXEL_RATIO,-this.size.height/2*i.PIXEL_RATIO);break;default:t.arc(0,0,this.size.width/2*i.PIXEL_RATIO,0,2*Math.PI)}t.closePath(),0===this._shadow.x&&0===this._shadow.y&&0===this._shadow.blur||(t.shadowOffsetX=this._shadow.x*i.PIXEL_RATIO,t.shadowOffsetY=this._shadow.y*i.PIXEL_RATIO,t.shadowBlur=this._shadow.blur*i.PIXEL_RATIO,t.shadowColor=this._shadow.color),this._color&&(t.fillStyle=this._color,t.fill()),0===this._shadow.x&&0===this._shadow.y&&0===this._shadow.blur||(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),this._border.width&&this._border.color&&(t.lineWidth=this._border.width*i.PIXEL_RATIO,t.strokeStyle=this._border.color,t.stroke()),this.dirty=!1}},e.prototype.setAnchorPoint=function(){var t=this._size.width/2+this._border.width/2,e=this._size.height/2+this._border.width/2;this._shadow.blur>0&&(t+=this._shadow.blur,e+=this._shadow.blur),this._shadow.x<0&&(t-=this._shadow.x),this._shadow.y<0&&(e-=this._shadow.y),this.anchor={x:t*i.PIXEL_RATIO,y:e*i.PIXEL_RATIO}},e.prototype.draw=function(t,e,n,s,o,h){e=void 0===e?0:e,n=void 0===n?0:n,s=void 0===s?0:s,o=void 0===o?1:o,h=void 0===h?1:h,t.save(),t.translate(e*i.PIXEL_RATIO,n*i.PIXEL_RATIO),0!==s&&t.rotate(s),t.translate(this.position.x*i.PIXEL_RATIO,this.position.y*i.PIXEL_RATIO),0!==this.rotation&&t.rotate(this.rotation),this.scale*o!==1&&t.scale(this.scale*o,this.scale*o),this.alpha*h<1&&(t.globalAlpha=this.alpha*h),this.dirty&&this.drawCanvasCache(),t.drawImage(this.canvas,-this.anchor.x,-this.anchor.y),t.restore(),i.GameObject.prototype.draw.call(this,t,this.position.x+e,this.position.y+n,this.rotation+s,this.scale*o,this.alpha*h)},e.prototype.update=function(t){i.GameObject.prototype.update.call(this,t);for(var e,n,s=this.tweens.length;s--;)n=this.tweens[s],n.time+=1e3*t,n.time>n.duration&&(n.time=n.duration),"object"==typeof this[n.property]?(e={},Object.keys(this[n.property]).forEach(function(t){e[t]=n.easingFunc(n.time,n.start[t],n.change[t],n.duration)}),this[n.property]=e):this[n.property]=n.easingFunc(n.time,n.start,n.change,n.duration),n.time===n.duration&&(this.tweens.splice(s,1),"function"==typeof n.callback&&n.callback());this.velocity.x+=this.acceleration.x,this.velocity.y+=this.acceleration.y,this.position.x+=this.velocity.x*this.speed*t,this.position.y+=this.velocity.y*this.speed*t,this.rotation+=this.angularVelocity*t},e.prototype.collidesWith=function(t){return this===t?!1:Math.abs(this.position.x-t.position.x)<this.size.width/2+t.size.width/2&&Math.abs(this.position.y-t.position.y)<this.size.height/2+t.size.height/2},e.prototype.tween=function(t,i,e,n,s){e=e||500;var o={},h=this;"object"==typeof i?Object.keys(this[t]).forEach(function(e){o[e]=i[e]-h[t][e]}):o=i-this[t],this.tweens.push({time:0,property:t,start:this[t],change:o,duration:e,easingFunc:Easie[n]||Easie.linearNone,callback:s})},i.Shape=e,t.Arcadia=i}(window),function(t){"use strict";var i=t.Arcadia||{},e=function(t,e){if(e=e||25,"function"!=typeof t)throw new Error("Emitter requires a factory function");for(i.GameObject.apply(this,arguments),this.duration=1,this.fade=!1,this.scale=1,this.speed=200,this.infinite=!1;e--;)this.children.add(t());this.children.deactivateAll()};e.prototype=new i.GameObject,e.prototype.activate=function(){this.elapsed=0,this.children.activateAll(),this.reset();for(var t,i,e=this.children.length;e--;)t=this.children.at(e),t.position.x=x,t.position.y=y,i=2*Math.random()*Math.PI,t.velocity.x=Math.cos(i),t.velocity.y=Math.sin(i),t.speed=Math.random()*this.speed},e.prototype.update=function(t){i.GameObject.prototype.update.call(this,t),this.elapsed+=t;for(var e,n=this.children.length;n--;)e=this.children.at(n),e.elapsed+=t,this.fade&&(e.alpha-=t/this.duration),1!==this.scale&&(e.scale+=this.scale*t/this.duration),e.elapsed>=this.duration&&this.children.deactivate(n)},e.prototype.reset=function(){for(var t=this.children.length;t--;)"function"==typeof this.children.at(t).reset&&this.children.at(t).reset()},i.Emitter=e,t.Arcadia=i}(window),function(t){"use strict";var i=t.Arcadia||{},e=function(t){t=t||{},this._font={size:10,family:"monospace"},this._text="text goes here",this._alignment="center",i.Shape.apply(this,arguments);var e=this;Object.keys(t).forEach(function(i){e[i]=t[i]})};e.prototype=new i.Shape,e.prototype.drawCanvasCache=function(){if(this.canvas){var t=this,e=this.canvas.getContext("2d"),n=1,s=this.text.match(/\n/g);s&&(n=s.length+1);var o=document.getElementById("text-dimensions");o||(o=document.createElement("div"),o.id="text-dimensions",o.style.position="absolute",o.style.top="-9999px",o.style.overflow="scroll",document.body.appendChild(o)),o.style.font=this.font,o.style["line-height"]=1,o.innerHTML=this.text.replace(/\n/g,"<br>").replace(/\s/g,"&nbsp;"),this.size={width:o.offsetWidth,height:o.offsetHeight};var h=this.size.height/n*i.PIXEL_RATIO;this.anchor={x:this.size.width/2,y:this.size.height/2},this.canvas.width=(this.size.width+this._border.width+Math.abs(this._shadow.x)+this._shadow.blur)*i.PIXEL_RATIO,this.canvas.height=(this.size.height+this._border.width+Math.abs(this._shadow.y)+this._shadow.blur)*i.PIXEL_RATIO,e.font=this._font.size*i.PIXEL_RATIO+"px "+this._font.family,e.textAlign=this.alignment,e.textBaseline="middle",this.setAnchorPoint(),this.debug&&(e.lineWidth=1*i.PIXEL_RATIO,e.strokeStyle="#f00",e.strokeRect(0,0,this.canvas.width,this.canvas.height),e.arc(this.anchor.x,this.anchor.y,3,0,2*Math.PI,!1),e.stroke()),e.translate(this.anchor.x,this.anchor.y),0===this._shadow.x&&0===this._shadow.y&&0===this._shadow.blur||(e.shadowOffsetX=this._shadow.x*i.PIXEL_RATIO,e.shadowOffsetY=this._shadow.y*i.PIXEL_RATIO,e.shadowBlur=this._shadow.blur*i.PIXEL_RATIO,e.shadowColor=this._shadow.color);var a=0;"start"===this.alignment||"left"===this.alignment?a=-this._size.width/2:"end"!==this.alignment&&"right"!==this.alignment||(a=this._size.width/2),this.color&&(e.fillStyle=this.color,n>1?this.text.split("\n").forEach(function(n,s){e.fillText(n,a,-t.size.height/2*i.PIXEL_RATIO+h/2+h*s)}):e.fillText(this.text,a,0)),0===this._shadow.x&&0===this._shadow.y&&0===this._shadow.blur||(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0),this._border.width&&this._border.color&&(e.lineWidth=this._border.width*i.PIXEL_RATIO,e.strokeStyle=this._border.color,n>1?this.text.split("\n").forEach(function(n,s){e.strokeText(n,a,-t.size.height/2*i.PIXEL_RATIO+h/2+h*s)}):e.strokeText(this.text,a,0)),this.dirty=!1}},Object.defineProperty(e.prototype,"font",{enumerable:!0,get:function(){return this._font.size+"px "+this._font.family},set:function(t){var i=t.match(/^(\d+)(?:px)?\ (.+)$/);if(!i||3!==i.length)throw new Error('Use format "(size)px (font-family)" when setting Label font');this._font.size=i[1],this._font.family=i[2],this.dirty=!0}}),Object.defineProperty(e.prototype,"text",{enumerable:!0,get:function(){return this._text},set:function(t){this._text=String(t),this.dirty=!0}}),Object.defineProperty(e.prototype,"alignment",{enumerable:!0,get:function(){return this._alignment},set:function(t){var i=["left","right","center","start","end"];if(-1===i.indexOf(t))throw new Error("Allowed alignment values: left, right, center, start, end");this._alignment=t,this.dirty=!0}}),i.Label=e,t.Arcadia=i}(window),function(t){"use strict";var i=t.Arcadia||{},e=function(t){if(t=t||{},t.label||(t.label=new i.Label({text:t.text,font:t.font})),this.padding=t.padding||0,this.label=t.label,this.label.drawCanvasCache(),i.Shape.apply(this,arguments),this.add(this.label),"function"==typeof t.action&&(this.action=t.action),this.disabled=!1,this.enablePointEvents=!0,!t.size){var e;e=0===this.vertices?this.label.size.width:this.label.size.height,this.size={width:this.label.size.width+this.padding,height:e+this.padding}}};e.prototype=new i.Shape,e.prototype.onPointEnd=function(t){if(i.Shape.prototype.onPointEnd.call(this,t),this.action&&!this.disabled)for(var e=t.length;e;)e-=1,this.containsPoint(t[e])&&this.action()},e.prototype.containsPoint=function(t){return t.x<this.position.x+this.size.width/2+this.padding/2&&t.x>this.position.x-this.size.width/2-this.padding/2&&t.y<this.position.y+this.size.height/2+this.padding/2&&t.y>this.position.y-this.size.height/2-this.padding/2},Object.defineProperty(e.prototype,"text",{enumerable:!0,get:function(){return this.label.text},set:function(t){this.label.text=t}}),Object.defineProperty(e.prototype,"font",{enumerable:!0,get:function(){return this.label.font},set:function(t){this.label.font=t}}),i.Button=e,t.Arcadia=i}(window),function(t){"use strict";var i=t.Arcadia||{};if(i.ENV=function(){var t=navigator.userAgent.toLowerCase(),i=!!(t.match(/android/i)&&t.match(/android/i).length>0),e=!!(t.match(/ip(hone|od|ad)/i)&&t.match(/ip(hone|od|ad)/i).length>0),n=!!(t.match(/firefox/i)&&t.match(/firefox/i).length>0),s=!!(t.match(/mobile/i)&&t.match(/mobile/i).length>0)||i;return Object.freeze({android:i,ios:e,firefox:n,mobile:s,desktop:!s,cordova:void 0!==window.cordova})}(),i.changeScene=function(t,e){i.instance.activeScene=new t(e)},i.distance=function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},i.random=function(t,i){var e=i-t;return Math.random()*e+t},i.randomSign=function(){return Math.random()<.5?1:-1},t.requestAnimationFrame||(t.requestAnimationFrame=t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame),t.cancelAnimationFrame||(t.cancelAnimationFrame=t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.msCancelAnimationFrame),!t.performance){var e=Date.now();t.performance={now:function(){return Date.now()-e}}}t.Arcadia=i,t.module&&(t.module.exports=i)}(window);